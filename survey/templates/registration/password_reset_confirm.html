{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Set New Password" %} â€” Mapsurvey{% endblock %}

{% block content_wrapper_class %}auth-page{% endblock %}

{% block content %}
<div class="auth-card">
    {% if validlink %}
    <h2>{% trans "Set New Password" %}</h2>
    <p class="auth-subtitle">{% trans "Enter and confirm your new password." %}</p>

    <form method="post" action="">
        {% csrf_token %}
        <div class="form-group">
            <label for="id_new_password1">{% trans "New password" %}</label>
            <input type="password" name="new_password1" id="id_new_password1" class="form-control" required>
            {% if form.new_password1.errors %}
                <ul class="errorlist">
                {% for error in form.new_password1.errors %}<li>{{ error }}</li>{% endfor %}
                </ul>
            {% endif %}
        </div>
        <div class="form-group">
            <label for="id_new_password2">{% trans "Confirm password" %}</label>
            <input type="password" name="new_password2" id="id_new_password2" class="form-control" required>
            {% if form.new_password2.errors %}
                <ul class="errorlist">
                {% for error in form.new_password2.errors %}<li>{{ error }}</li>{% endfor %}
                </ul>
            {% endif %}
        </div>
        <button type="submit" class="btn-auth">{% trans "Change Password" %}</button>
    </form>
    {% else %}
    <div class="auth-message">
        <span class="auth-icon" style="color: #dc3545;">&#10007;</span>
        <h2>{% trans "Link Invalid" %}</h2>
        <p>{% trans "This password reset link is invalid or has already been used." %}</p>
        <div class="auth-links" style="margin-top:1.25rem;">
            <a href="{% url 'password_reset' %}">{% trans "Request a new reset link" %}</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
